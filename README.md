# ZUITREE

ZUITREEはCfCAのN体学校・GPU講習会に始まった、C++で書かれたN体重力計算のGPU実装コードです。

## 特徴

- 重力相互作用は直接法とツリー法の2種。PPPT法(Oshino, Funato, & Makino 2011)などは実装するかもしれないししないかもしれない
- GPUによる並列化(予定)
  - CUDAを使うかKokkosを使うか模索中

## ビルドの方法

bashターミナル(コンソール)上でこのプロジェクトのディレクトリに入り、

```bash
make
```

を実行すれば大丈夫です。out-of-sourceビルドに標準対応。CPU上で動かすのにも対応(オプションを変更してください)。

## 実行方法

gpu_batch.shをsbatchでGPUクラスタに送れば良い。

## コード開発に関するメモ

特に謎なもの:

- "restrict" キーワードは標準のC++では対応されてないものの、NVHPCではなぜかこれがないときちんと動かない
  - 標準のC++のIntelisenseだとエラーになって見辛くなるので、#ifndefで対応してる
